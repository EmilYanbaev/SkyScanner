(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{146:function(e,t,n){},147:function(e,t,n){},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(4),a="auth/SIGN_IN",c="auth/LOG_OUT",i="auth/SIGN_SUCCESS",u="auth/CLEAR_TOKEN",o={isLogin:!1,encryptedToken:"ikg\x97\x9bd\x95h\xdajgjgm\x97fn\xb0g\x9bhfg\x95\x98\x99\xdb\x9aeidl",token:null};t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(r.a)(Object(r.a)({},e),{},{isLogin:!0,token:t.token});case c:return Object(r.a)(Object(r.a)({},e),{},{isLogin:!1});case u:return Object(r.a)(Object(r.a)({},e),{},{token:null});default:return e}};var s=function(e){return{type:a,data:e}},b=function(e){return{type:i,token:e}},p=function(){return{type:c}},d=function(){return{type:u}}},23:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return j})),n.d(t,"d",(function(){return l}));var r=n(92),a=n(4),c=n(72),i="tickets/SET_TICKET",u="tickets/SET_DATA_DEPARTURE",o="tickets/TOGGLE_TICKETS_SUCCESS",s="tickets/SET_LIKE_TICKET",b="tickets/SET_CURRENT_PAGE",p={data:[],dataDeparture:null,basketCount:0,ticketsLike:[],currentPage:null,setTicketsSuccess:!1};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(a.a)(Object(a.a)({},e),{},{data:t.tickets});case b:return Object(a.a)(Object(a.a)({},e),{},{currentPage:t.page});case u:return Object(a.a)(Object(a.a)({},e),{},{dataDeparture:t.data});case o:return Object(a.a)(Object(a.a)({},e),{},{setTicketsSuccess:t.toggle});case s:return t.isLike?Object(a.a)(Object(a.a)({},e),{},{ticketsLike:[].concat(Object(r.a)(e.ticketsLike),[t.ticket]),basketCount:++e.basketCount}):Object(a.a)(Object(a.a)({},e),{},{basketCount:--e.basketCount,ticketsLike:e.ticketsLike.filter((function(e){return!Object(c.a)(e,t.ticket)}))});default:return e}};var d=function(e){return{type:i,tickets:e}},f=function(e){return{type:b,page:e}},O=function(e){return{type:u,data:e}},j=function(e){return{type:o,toggle:e}},l=function(e,t){return{type:s,ticket:e,isLike:t}}},232:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(37),i=n.n(c),u=(n(146),n(147),n(18)),o=n(88),s=n(93),b=n(21),p=n(4),d="preloader/TOGGLE_PRELOADER_LOGIN_PAGE",f="preloader/TOGGLE_PRELOADER_TICKETS",O={viewPreloaderLoginPage:!1,viewPreloaderSearchTickets:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(p.a)(Object(p.a)({},e),{},{viewPreloaderLoginPage:!e.viewPreloaderLoginPage});case f:return Object(p.a)(Object(p.a)({},e),{},{viewPreloaderSearchTickets:!e.viewPreloaderSearchTickets});default:return e}},l=function(){return{type:d}},h=function(){return{type:f}},m=n(26),g=n(23),v=n(10),k=n.n(v),x=n(63),_=n(19),y=function(e,t){for(String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)};e.length!==t.length;)e.length<t.length&&(e+=e),e.length>t.length&&(e=e.slice(0,e.length-1));for(var n=0;n<t.length;n++)t=t.replaceAt(n,String.fromCharCode(t.charCodeAt(n)-e.charCodeAt(n)));return t},E=n(35),T=n(36),S=n.n(T),L="https://intense-caverns-46819.herokuapp.com/",w=function(e){return Object(E.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.get("".concat(L,"http://api.travelpayouts.com/v1/prices/cheap?origin=MOW&destination=HKT&depart_date=2017-11&return_date=2017-12&token=").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:if(t.prev=7,t.t0=t.catch(0),!t.t0.response){t.next=11;break}return t.abrupt("return",t.t0.response.data);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},P=function(e,t,n,r,a){return Object(E.a)(k.a.mark((function c(){var i;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,S.a.get("".concat(L,"http://api.travelpayouts.com/v2/prices/latest?currency=rub&origin=").concat(e,"&destination=").concat(t,"&beginning_of_period=2021-").concat(n,"-01&period_type=month&one_way=true&page=").concat(a,"&limit=10&show_to_affiliates=true&sorting=price&token=").concat(r));case 3:return i=c.sent,c.abrupt("return",i.data);case 5:case"end":return c.stop()}}),c)})))()},I=function(e){return Object(E.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("".concat(L,"http://autocomplete.travelpayouts.com/places2?term=").concat(e,"&locale=ru&types[]=city"));case 2:return n=t.sent,t.abrupt("return",n.data.slice(0,5));case 4:case"end":return t.stop()}}),t)})))()},C=function(e){return Object(E.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.get("".concat(L,"http://autocomplete.travelpayouts.com/places2?term=").concat(e,"&locale=ru"));case 2:return n=t.sent,t.abrupt("return",n.data[0]);case 4:case"end":return t.stop()}}),t)})))()},N=n(52),H=k.a.mark(A);function A(e){var t,n,r,a;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.data,c.next=4,Object(_.b)(l());case 4:return n=y(t.pass,t.encryptedToken),c.next=7,Object(_.a)(w,n);case 7:if(!((r=c.sent).error.length>0)){c.next=16;break}return a="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c\n"+r.error,c.next=12,Object(_.b)(l());case 12:return c.next=14,Object(_.b)(Object(N.a)("login",{_error:a}));case 14:c.next=21;break;case 16:return c.next=18,Object(_.b)(Object(b.f)(n));case 18:return sessionStorage.setItem("token",n),c.next=21,Object(_.b)(l());case 21:case"end":return c.stop()}}),H)}var D=n(11),G=k.a.mark(R);function R(e){var t,n,r;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.value,n=e.id,!t){a.next=9;break}return a.next=4,Object(D.a)(I,t);case 4:return r=a.sent,a.next=7,Object(D.b)(Object(m.d)(r,n));case 7:a.next=11;break;case 9:return a.next=11,Object(D.b)(Object(m.b)(n));case 11:case"end":return a.stop()}}),G)}var U=n(81),K=k.a.mark(F);function F(e){var t,n,r,a,c,i;return k.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.data,n=e.token,u.next=4,Object(D.b)(h());case 4:return u.next=6,Object(D.b)(Object(g.f)(!1));case 6:return u.next=8,Object(D.a)(C,t.origin.name);case 8:return r=u.sent,u.next=11,Object(D.a)(C,t.destination.name);case 11:return a=u.sent,c=Object(U.a)(t.month.number),u.next=15,Object(D.b)(Object(g.c)({origin:{name:r.name,iata:r.code},destination:{name:a.name,iata:a.code},month:c}));case 15:return t.month.number<10&&(t.month.number="0"+t.month.number),u.next=18,Object(D.a)(P,r.code,a.code,t.month.number,n,t.page);case 18:return i=u.sent,u.next=21,Object(D.b)(Object(g.e)(i.data));case 21:return u.next=23,Object(D.b)(Object(g.b)(t.page));case 23:return u.next=25,Object(D.b)(h());case 25:return u.next=27,Object(D.b)(Object(g.f)(!0));case 27:case"end":return u.stop()}}),K)}var z=k.a.mark(J);function J(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.c)(b.a,A);case 2:return e.next=4,Object(_.c)(m.a,R);case 4:return e.next=6,Object(_.c)(x.a,F);case 6:case"end":return e.stop()}}),z)}var M=Object(s.a)(),B=Object(u.c)({auth:b.c,search:m.c,tickets:g.a,preloaders:j,form:o.a}),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,V=Object(u.e)(B,X(Object(u.a)(M)));window.__store=V,M.run(J);var W=V,q=n(46),Q=n(27),Y=n(9),Z=n(89),$=n(67),ee=n(68),te=n(71),ne=n(69),re=n(8),ae=n(70),ce=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,309))})),ie=a.a.lazy((function(){return Promise.all([n.e(6),n.e(4)]).then(n.bind(null,308))})),ue=Object(u.d)((function(e){var t=function(t){Object(te.a)(r,t);var n=Object(ne.a)(r);function r(){return Object($.a)(this,r),n.apply(this,arguments)}return Object(ee.a)(r,[{key:"render",value:function(){var t;t=this.props.isLogin?"/login"===this.props.location.pathname||"/"===this.props.location.pathname||"/SkyScanner"===this.props.location.pathname?"/search":this.props.location.pathname:"/login";var n=this.props,r=(n.isLogin,Object(Z.a)(n,["isLogin"]));return Object(re.jsxs)(re.Fragment,{children:[Object(re.jsx)(e,Object(p.a)({},r)),Object(re.jsx)(Y.a,{to:t})]})}}]),r}(a.a.Component);return Object(Y.g)(Object(Q.b)((function(e){return{isLogin:e.auth.isLogin}}))(t))}))((function(e){return Object(re.jsx)(r.Suspense,{fallback:Object(re.jsx)(ae.a,{}),children:Object(re.jsxs)(Y.d,{children:[Object(re.jsx)(Y.b,{path:"/login",component:ce}),Object(re.jsx)(Y.b,{path:"/search",component:ie})]})})})),oe=Object(Q.b)((function(e){return{isLogin:e.auth.isLogin,token:e.auth.token}}),{isAuthorized:b.f,clearToken:b.b})((function(e){return Object(r.useEffect)((function(){!e.isLogin&&e.token&&(sessionStorage.clear(),e.clearToken()),sessionStorage.getItem("token")&&e.isAuthorized(sessionStorage.getItem("token"))}),[e.isLogin]),Object(re.jsx)(ue,{})}));var se=function(){return Object(re.jsx)("div",{className:"App",children:Object(re.jsx)(Q.a,{store:W,children:Object(re.jsx)(q.a,{children:Object(re.jsx)(oe,{})})})})},be=function(e){e&&e instanceof Function&&n.e(7).then(n.bind(null,307)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(re.jsx)(a.a.StrictMode,{children:Object(re.jsx)(se,{})}),document.getElementById("root")),be()},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return O}));var r=n(4),a="search/UPDATE_INPUT",c="search/SET_HELP_INPUT",i="search/CLEAR_INPUT_HELP",u="search/SET_HIDDEN_HELP",o="search/SET_MONTH",s={originInput:"",originHelp:[],hiddenOriginHelp:!1,destinationInput:"",destinationHelp:[],hiddenDestinationHelp:!1,month:3};t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return 1==t.id?Object(r.a)(Object(r.a)({},e),{},{originInput:t.value}):Object(r.a)(Object(r.a)({},e),{},{destinationInput:t.value});case c:return e.originInput||e.destinationInput?1==t.id?Object(r.a)(Object(r.a)({},e),{},{originHelp:t.data.map((function(e){return{name:e.name,code:e.code}}))}):Object(r.a)(Object(r.a)({},e),{},{destinationHelp:t.data.map((function(e){return{name:e.name,code:e.code}}))}):e;case i:return 1==t.id?Object(r.a)(Object(r.a)({},e),{},{originHelp:[]}):Object(r.a)(Object(r.a)({},e),{},{destinationHelp:[]});case u:return 1==t.id?Object(r.a)(Object(r.a)({},e),{},{hiddenOriginHelp:t.isHidden}):Object(r.a)(Object(r.a)({},e),{},{hiddenDestinationHelp:t.isHidden});case o:return Object(r.a)(Object(r.a)({},e),{},{month:t.number});default:return e}};var b=function(e,t){return{type:a,value:e,id:t}},p=function(e){return{type:i,id:e}},d=function(e,t){return{type:c,data:e,id:t}},f=function(e,t){return{type:u,id:e,isHidden:t}},O=function(e){return{type:o,number:e}}},58:function(e,t,n){e.exports={wrapper:"Preloader_wrapper__1OJ5F",preloader:"Preloader_preloader__zymti"}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="common/BEGINING_SEARCH",a=function(e,t){return{type:r,data:e,token:t}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(58),a=n.n(r),c=n.p+"static/media/preloader.6907a3e9.gif",i=n(8),u=function(e){var t=e.style;return Object(i.jsx)("div",{className:a.a.wrapper,style:t,children:Object(i.jsx)("img",{className:a.a.preloader,src:c,alt:""})})}},72:function(e,t,n){"use strict";function r(e,t){return JSON.stringify(e)===JSON.stringify(t)}n.d(t,"a",(function(){return r}))},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){var t=[{name:"\u042f\u043d\u0432\u0430\u0440\u044c",number:1},{name:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",number:2},{name:"\u041c\u0430\u0440\u0442",number:3},{name:"\u0410\u043f\u0440\u0435\u043b\u044c",number:4},{name:"\u041c\u0430\u0439",number:5},{name:"\u0418\u044e\u043d\u044c",number:6},{name:"\u0418\u044e\u043b\u044c",number:7},{name:"\u0410\u0432\u0433\u0443\u0441\u0442",number:8},{name:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",number:9},{name:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",number:10},{name:"\u041d\u043e\u044f\u0431\u0440\u044c",number:11},{name:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",number:12}];return 0===e?t:t[Number(e)-1]}}},[[232,1,2]]]);
//# sourceMappingURL=main.45202f09.chunk.js.map