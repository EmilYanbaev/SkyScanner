(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{143:function(t,e,n){},144:function(t,e,n){},21:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return o}));var r=n(6),a="auth/SIGN_IN",c="auth/SIGN_SUCCESS",i={isLogin:!1,encryptedToken:"ikg\x97\x9bd\x95h\xdajgjgm\x97fn\xb0g\x9bhfg\x95\x98\x99\xdb\x9aeidl",token:null};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return Object(r.a)(Object(r.a)({},t),{},{isLogin:!0,token:e.token});default:return t}};var u=function(t){return{type:a,data:t}},o=function(t){return{type:c,token:t}}},229:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(44),i=n.n(c),u=(n(143),n(144),n(18)),o=n(84),s=n(90),b=n(21),d=n(25),p=n(26),j=n(10),f=n.n(j),O=n(61),h=n(23),l=function(t,e){for(String.prototype.replaceAt=function(t,e){return this.substr(0,t)+e+this.substr(t+e.length)};t.length!=e.length;)t.length<e.length&&(t+=t),t.length>e.length&&(t=t.slice(0,t.length-1));for(var n=0;n<e.length;n++)e=e.replaceAt(n,String.fromCharCode(e.charCodeAt(n)-t.charCodeAt(n)));return e},m=n(35),g=n(36),v=n.n(g),k="https://intense-caverns-46819.herokuapp.com/",x=function(t){return Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(k,"http://api.travelpayouts.com/v1/prices/cheap?origin=MOW&destination=HKT&depart_date=2017-11&return_date=2017-12&token=").concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response){e.next=11;break}return e.abrupt("return",e.t0.response.data);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},_=function(t,e,n,r){return Object(m.a)(f.a.mark((function a(){var c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.get("".concat(k,"http://api.travelpayouts.com/v2/prices/latest?currency=rub&origin=").concat(t,"&destination=").concat(e,"&beginning_of_period=2021-").concat(n,"-01&period_type=month&one_way=true&page=1&limit=10&show_to_affiliates=true&sorting=price&token=").concat(r));case 2:return c=a.sent,a.abrupt("return",c.data);case 4:case"end":return a.stop()}}),a)})))()},y=function(t){return Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(k,"http://autocomplete.travelpayouts.com/places2?term=").concat(t,"&locale=ru&types[]=city"));case 2:return n=e.sent,e.abrupt("return",n.data.slice(0,5));case 4:case"end":return e.stop()}}),e)})))()},S=function(t){return Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(k,"http://autocomplete.travelpayouts.com/places2?term=").concat(t,"&locale=ru"));case 2:return n=e.sent,e.abrupt("return",n.data[0]);case 4:case"end":return e.stop()}}),e)})))()},E=n(52),T=f.a.mark(w);function w(t){var e,n,r,a;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e=t.data,n=l(e.pass,e.encryptedToken),c.next=4,Object(h.a)(x,n);case 4:if(!((r=c.sent).error.length>0)){c.next=11;break}return a="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c\n"+r.error,c.next=9,Object(h.b)(Object(E.a)("login",{_error:a}));case 9:c.next=14;break;case 11:return c.next=13,Object(h.b)(Object(b.d)(n));case 13:sessionStorage.setItem("token",n);case 14:case"end":return c.stop()}}),T)}var I=n(12),L=f.a.mark(C);function C(t){var e,n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=t.value,n=t.id,!e){a.next=9;break}return a.next=4,Object(I.a)(y,e);case 4:return r=a.sent,a.next=7,Object(I.b)(Object(d.d)(r,n));case 7:a.next=11;break;case 9:return a.next=11,Object(I.b)(Object(d.b)(n));case 11:case"end":return a.stop()}}),L)}var H=n(74),N=f.a.mark(A);function A(t){var e,n,r,a,c,i;return f.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return e=t.data,n=t.token,u.next=3,Object(I.b)(Object(p.e)(!1));case 3:return u.next=5,Object(I.a)(S,e.origin);case 5:return r=u.sent,u.next=8,Object(I.a)(S,e.destination);case 8:return a=u.sent,c=Object(H.a)(e.month),u.next=12,Object(I.b)(Object(p.b)({origin:{name:r.name,iata:r.code},destination:{name:a.name,iata:a.code},month:c}));case 12:return e.month<10&&(e.month="0"+e.month),u.next=15,Object(I.a)(_,r.code,a.code,e.month,n);case 15:return i=u.sent,u.next=18,Object(I.b)(Object(p.d)(i.data));case 18:return u.next=20,Object(I.b)(Object(p.e)(!0));case 20:case"end":return u.stop()}}),N)}var D=f.a.mark(P);function P(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)(b.a,w);case 2:return t.next=4,Object(h.c)(d.a,C);case 4:return t.next=6,Object(h.c)(O.a,A);case 6:case"end":return t.stop()}}),D)}var U=Object(s.a)(),G=Object(u.c)({auth:b.b,search:d.c,tickets:p.a,form:o.a}),F=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,K=Object(u.e)(G,F(Object(u.a)(U)));window.__store=K,U.run(P);var R=K,z=n(46),M=n(27),B=n(9),J=n(6),X=n(85),V=n(80),W=n(81),q=n(86),Q=n(83),Y=n(8),Z=a.a.lazy((function(){return Promise.all([n.e(3),n.e(5)]).then(n.bind(null,304))})),$=a.a.lazy((function(){return Promise.all([n.e(6),n.e(4)]).then(n.bind(null,303))})),tt=Object(u.d)((function(t){var e=function(e){Object(q.a)(r,e);var n=Object(Q.a)(r);function r(){return Object(V.a)(this,r),n.apply(this,arguments)}return Object(W.a)(r,[{key:"render",value:function(){var e;e=this.props.isLogin?"/login"===this.props.location.pathname||"/"===this.props.location.pathname||"/SkyScanner"===this.props.location.pathname?"/search":this.props.location.pathname:"/login";var n=this.props,r=(n.isLogin,Object(X.a)(n,["isLogin"]));return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(t,Object(J.a)({},r)),Object(Y.jsx)(B.a,{to:e})]})}}]),r}(a.a.Component);return Object(B.g)(Object(M.b)((function(t){return{isLogin:t.auth.isLogin}}))(e))}))((function(t){return Object(Y.jsx)(r.Suspense,{fallback:Object(Y.jsx)("div",{children:"LOADING"}),children:Object(Y.jsxs)(B.d,{children:[Object(Y.jsx)(B.b,{path:"/login",component:Z}),Object(Y.jsx)(B.b,{path:"/search",component:$})]})})})),et=Object(M.b)((function(t){return{isLogin:t.auth.isLogin}}),{isAuthorized:b.d})((function(t){return Object(r.useEffect)((function(){sessionStorage.getItem("token")&&t.isAuthorized(sessionStorage.getItem("token"))}),[t.isLogin]),Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(tt,{})})}));var nt=function(){return Object(Y.jsx)("div",{className:"App",children:Object(Y.jsx)(M.a,{store:R,children:Object(Y.jsx)(z.a,{children:Object(Y.jsx)(et,{})})})})},rt=function(t){t&&t instanceof Function&&n.e(7).then(n.bind(null,302)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};i.a.render(Object(Y.jsx)(a.a.StrictMode,{children:Object(Y.jsx)(nt,{})}),document.getElementById("root")),rt()},25:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return b})),n.d(e,"b",(function(){return d})),n.d(e,"d",(function(){return p})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return f}));var r=n(6),a="search/UPDATE_INPUT",c="search/SET_HELP_INPUT",i="search/CLEAR_INPUT_HELP",u="search/SET_HIDDEN_HELP",o="search/SET_MONTH",s={originInput:"",originHelp:[],hiddenOriginHelp:!1,destinationInput:"",destinationHelp:[],hiddenDestinationHelp:!1,month:3};e.c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case a:return 1==e.id?Object(r.a)(Object(r.a)({},t),{},{originInput:e.value}):Object(r.a)(Object(r.a)({},t),{},{destinationInput:e.value});case c:return t.originInput||t.destinationInput?1==e.id?Object(r.a)(Object(r.a)({},t),{},{originHelp:e.data.map((function(t){return{name:t.name,code:t.code}}))}):Object(r.a)(Object(r.a)({},t),{},{destinationHelp:e.data.map((function(t){return{name:t.name,code:t.code}}))}):t;case i:return 1==e.id?Object(r.a)(Object(r.a)({},t),{},{originHelp:[]}):Object(r.a)(Object(r.a)({},t),{},{destinationHelp:[]});case u:return 1==e.id?Object(r.a)(Object(r.a)({},t),{},{hiddenOriginHelp:e.isHidden}):Object(r.a)(Object(r.a)({},t),{},{hiddenDestinationHelp:e.isHidden});case o:return Object(r.a)(Object(r.a)({},t),{},{month:e.number});default:return t}};var b=function(t,e){return{type:a,value:t,id:e}},d=function(t){return{type:i,id:t}},p=function(t,e){return{type:c,data:t,id:e}},j=function(t,e){return{type:u,id:t,isHidden:e}},f=function(t){return{type:o,number:t}}},26:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"c",(function(){return j}));var r=n(89),a=n(6),c="tickets/SET_TICKET",i="tickets/SET_DATA_DEPARTURE",u="tickets/TOGGLE_TICKETS_SUCCESS",o="tickets/SET_LIKE_TICKET",s={data:[],dataDeparture:null,basketCount:0,ticketsLike:[],setTicketsSuccess:!1};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return Object(a.a)(Object(a.a)({},t),{},{data:e.tickets});case i:return Object(a.a)(Object(a.a)({},t),{},{dataDeparture:e.data});case u:return Object(a.a)(Object(a.a)({},t),{},{setTicketsSuccess:e.toggle});case o:return e.isLike?Object(a.a)(Object(a.a)({},t),{},{ticketsLike:[].concat(Object(r.a)(t.ticketsLike),[e.ticket]),basketCount:++t.basketCount}):Object(a.a)(Object(a.a)({},t),{},{basketCount:--t.basketCount});default:return t}};var b=function(t){return{type:c,tickets:t}},d=function(t){return{type:i,data:t}},p=function(t){return{type:u,toggle:t}},j=function(t,e){return{type:o,ticket:t,isLike:e}}},61:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r="common/BEGINING_SEARCH",a=function(t,e){return{type:r,data:t,token:e}}},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){var e=[{name:"\u042f\u043d\u0432\u0430\u0440\u044c",number:1},{name:"\u0424\u0435\u0432\u0440\u0430\u043b\u044c",number:2},{name:"\u041c\u0430\u0440\u0442",number:3},{name:"\u0410\u043f\u0440\u0435\u043b\u044c",number:4},{name:"\u041c\u0430\u0439",number:5},{name:"\u0418\u044e\u043d\u044c",number:6},{name:"\u0418\u044e\u043b\u044c",number:7},{name:"\u0410\u0432\u0433\u0443\u0441\u0442",number:8},{name:"\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c",number:9},{name:"\u041e\u043a\u0442\u044f\u0431\u0440\u044c",number:10},{name:"\u041d\u043e\u044f\u0431\u0440\u044c",number:11},{name:"\u0414\u0435\u043a\u0430\u0431\u0440\u044c",number:12}];return 0===t?e:e[Number(t)-1]}}},[[229,1,2]]]);
//# sourceMappingURL=main.8079515f.chunk.js.map